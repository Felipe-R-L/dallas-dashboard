<div class="flex flex-col items-center justify-center w-full">
  <label
    for="dropzone-file"
    class="flex flex-col items-center justify-center w-full h-64 rounded-xl border-2 border-dashed border-border-glass bg-surface-glass/50 cursor-pointer transition-colors hover:border-border-glow hover:bg-surface-glass"
    [ngClass]="{ 'border-accent-start bg-accent-start/10': isDragging }"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
  >
    <div class="flex flex-col items-center justify-center pt-5 pb-6 text-center">
      <svg
        class="w-10 h-10 mb-3 text-text-muted"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M7 16a4 4 0 01-4-4V7a4 4 0 014-4h.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293h3.172a1 1 0 00.707-.293l2.414-2.414A1 1 0 0116.414 3H17a4 4 0 014 4v5a4 4 0 01-4 4H7z"
        />
      </svg>
      <p class="mb-2 text-sm text-text-muted">
        <span class="font-semibold text-accent-start">Clique para enviar</span> ou arraste e solte
      </p>
      <p class="text-xs text-text-muted">Planilhas XLS, XLSX ou CSV</p>
    </div>
    <input
      id="dropzone-file"
      type="file"
      class="hidden"
      multiple
      (change)="onFileSelected($event)"
      accept=".xlsx, .xls, .csv"
    />
  </label>

  @if (selectedFiles.length > 0) {
    <div class="w-full mt-4">
      <h3 class="text-base font-semibold text-text-base">Ficheiros Selecionados:</h3>
      <ul class="mt-2 space-y-2">
        @for (file of selectedFiles; track file.name) {
          <li
            class="flex items-center justify-between p-2.5 rounded-lg border border-border-glass bg-surface-glass"
          >
            <div class="flex items-center gap-3">
              <svg
                class="w-6 h-6 text-green-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                />
              </svg>
              <span class="text-sm font-medium text-text-base">{{ file.name }}</span>
              <span class="text-xs text-text-muted">({{ formatBytes(file.size) }})</span>
            </div>
            <button (click)="removeFile(file)" class="text-red-500 hover:text-red-400">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                />
              </svg>
            </button>
          </li>
        }
      </ul>
    </div>
  }
</div>
